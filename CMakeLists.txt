cmake_minimum_required(VERSION 3.21)
project(logger
  VERSION 0.1.0
  LANGUAGES CXX
)

set(TARGET_NAME sv-${PROJECT_NAME})
set(EXPORT_NAME sv-${PROJECT_NAME}-config)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED True)

if (WIN32)
  set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin")
  set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib")
  set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib")
elseif (UNIX)
  set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin")
  set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin")
  set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib")
endif()

find_package(Boost REQUIRED COMPONENTS asio)

add_subdirectory(src)
add_subdirectory(test)

install(EXPORT ${EXPORT_NAME}
        DESTINATION "${CMAKE_INSTALL_PREFIX}/share/sv"
        NAMESPACE sv
)